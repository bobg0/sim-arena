#!/usr/bin/env python3
"""
sk-run - Convenience wrapper for runner/one_step.py

Usage:
  ./sk-run --trace demo/trace-0001.msgpack --ns test-ns --deploy web --target 3 --duration 120
"""

import sys
import os
from pathlib import Path

# Add current directory to Python path
script_dir = Path(__file__).parent.absolute()
sys.path.insert(0, str(script_dir))

# Set PYTHONPATH environment variable for subprocesses
os.environ['PYTHONPATH'] = str(script_dir)

# Try to use virtual environment if it exists
venv_python = script_dir / ".venv" / "bin" / "python"
if venv_python.exists() and os.getenv("VIRTUAL_ENV") is None:
    # If venv exists but we're not using it, suggest to user
    # (We can't switch interpreters mid-execution, but this ensures imports work)
    pass

# Import and run main from one_step
from runner.one_step import main

if __name__ == "__main__":
    sys.exit(main())

